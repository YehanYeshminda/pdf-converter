<mat-toolbar color="primary" class="top-toolbar" role="banner">
    <button mat-icon-button (click)="toggleSidenav()" aria-label="Toggle menu" matTooltip="Toggle menu">
        <mat-icon>menu</mat-icon>
    </button>

    <div class="brand">
        <mat-icon class="brand-icon" aria-label="ToolVerse logo" matTooltip="ToolVerse">build_circle</mat-icon>
        <span class="brand-title">ToolVerse</span>
    </div>
    <span class="spacer"></span>

    <button mat-icon-button (click)="openSearchDialog()" aria-label="Search tools" matTooltip="Search tools (Ctrl+K)" class="search-trigger-btn">
        <mat-icon>search</mat-icon>
    </button>

    <div class="visitor-counter" matTooltip="Total visitors to this site">
        <mat-icon class="visitor-icon">visibility</mat-icon>
        <span *ngIf="visitorCount >= 0">{{ visitorCount | number }}</span>
        <span *ngIf="visitorCount < 0" class="loading-count">loading...</span>
    </div>

    <mat-slide-toggle class="theme-toggle" [checked]="isDark" (change)="toggleTheme()" matTooltip="Toggle dark mode">
        <mat-icon>{{ isDark ? 'dark_mode' : 'light_mode' }}</mat-icon>
    </mat-slide-toggle>

    <button mat-icon-button aria-label="About" class="icon-btn" matTooltip="Built with ❤️ by YYDev.">
        <mat-icon>info</mat-icon>
    </button>
</mat-toolbar>

<mat-sidenav-container class="sidenav-container">
    <mat-sidenav #sidenav mode="side" opened class="sidenav">
        <mat-nav-list>
            <!-- Converters Section -->
            <div class="section-header" (click)="toggleSection('converters')">
                <h3 mat-subheader>Converters</h3>
                <mat-icon class="expand-icon">{{ convertersExpanded ? 'expand_less' : 'expand_more' }}</mat-icon>
            </div>
            <div class="section-content" [class.collapsed]="!convertersExpanded">
                <a mat-list-item routerLink="/pdf-converter" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>picture_as_pdf</mat-icon>
                    <span matListItemTitle>PDF Converter</span>
                </a>

                <a mat-list-item routerLink="/text-encoder-decoder" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>text_fields</mat-icon>
                    <span matListItemTitle>Text Encoder</span>
                </a>

                <a mat-list-item routerLink="/json-to-typescript" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>data_object</mat-icon>
                    <span matListItemTitle>JSON to Code</span>
                </a>

                <a mat-list-item routerLink="/jwt-decoder" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>key</mat-icon>
                    <span matListItemTitle>JWT Decoder</span>
                </a>

                <a mat-list-item routerLink="/regex-tester" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>search</mat-icon>
                    <span matListItemTitle>RegEx Tester</span>
                </a>

                <a mat-list-item routerLink="/timestamp-converter" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>schedule</mat-icon>
                    <span matListItemTitle>Timestamp Converter</span>
                </a>
            </div>

            <mat-divider></mat-divider>

            <!-- PDF Tools Section -->
            <div class="section-header" (click)="toggleSection('pdfTools')">
                <h3 mat-subheader>PDF Tools</h3>
                <mat-icon class="expand-icon">{{ pdfToolsExpanded ? 'expand_less' : 'expand_more' }}</mat-icon>
            </div>
            <div class="section-content" [class.collapsed]="!pdfToolsExpanded">
                <a mat-list-item routerLink="/pdf-editor" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>edit</mat-icon>
                    <span matListItemTitle>PDF Editor</span>
                </a>

                <a mat-list-item routerLink="/pdf-splitter" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>content_cut</mat-icon>
                    <span matListItemTitle>PDF Splitter</span>
                </a>

                <a mat-list-item routerLink="/pdf-signature" routerLinkActive="active" (click)="onNavigate()">
                    <mat-icon matListItemIcon>draw</mat-icon>
                    <span matListItemTitle>PDF Signature</span>
                </a>
            </div>

            <mat-divider></mat-divider>

            <div class="section-header" (click)="toggleSection('about')">
                <h3 mat-subheader>About</h3>
                <mat-icon class="expand-icon">{{ aboutExpanded ? 'expand_less' : 'expand_more' }}</mat-icon>
            </div>
            <div class="section-content" [class.collapsed]="!aboutExpanded">
                <a mat-list-item href="https://yehanyeshminda.netlify.app" target="_blank" rel="noopener">
                    <mat-icon matListItemIcon>info</mat-icon>
                    <span matListItemTitle>Help & Info</span>
                </a>
            </div>
        </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
        <router-outlet></router-outlet>
    </mat-sidenav-content>
</mat-sidenav-container>
